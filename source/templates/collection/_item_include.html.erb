<article class="card flex flex-col justify-between" id="<%= item.dom_id %>">
  <% if config.item_card_image && bg_image = item.images&.first %>
    <% if page_url = detail_page_url(item) %>
      <a class="card-image" href="<%= page_url %>!" style="background-image: url('<%= bg_image %>')"></a>
    <% else %>
      <div class="card-image" style="background-image: url('<%= bg_image %>')"></div>
    <% end %>
  <% end %>
  <div class="card-header">

  <!-- ideally display item.category unless hidecategory TRUE passed in call -->
      <span><%= item.category %></span>

    <!-- display challenges as rendered value -->
    <span>
    <% rest_of_attrs(item).each do |attribute| %>
      <% value = item[attribute] %>
        <span class="text-gray-500">
          <% if value.is_a?(Array) && attribute == 'Challenges' %>
                      <%= render_link_values(value) %>
                     <% end %>
        </span>
    <% end %>
  </span>

    <h3><%= item.title %></h3>
  </div>
  <div class="card-body">
    <span class="text-gray-500"><%= strip_truncate(item.description, 350) %></span>
    <!-- <p><%= render_tags(item.tags) %></p> -->
    <p><%= render_tag_links(item.tags) %></p>

<!--    <p><%= render_principle_links(item.principles) %></p> -->

<!--    <p><%= render_links(['Principles','Cases','Strategies','Stakeholders','Sources']) %></p> -->
<!-- tried to add base_url before page_url here -->

  <% if page_url = detail_page_url(item) %>
    <div class="card-actions"><%= link_to 'More', page_url, class: 'btn' %></div>
  <% end %>

</article>
